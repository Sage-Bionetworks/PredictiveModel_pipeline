system("mkdir ~/PredictiveModel_IC50")

system("mkdir ~/PredictiveModel_IC50/E")
system("mkdir ~/PredictiveModel_IC50/C")
system("mkdir ~/PredictiveModel_IC50/EMo")
system("mkdir ~/PredictiveModel_IC50/CMo")
system("mkdir ~/PredictiveModel_IC50/EC")
system("mkdir ~/PredictiveModel_IC50/ECMo")


system("mkdir ~/PredictiveModel_IC50/EL")
system("mkdir ~/PredictiveModel_IC50/CL")
system("mkdir ~/PredictiveModel_IC50/EMoL")
system("mkdir ~/PredictiveModel_IC50/CMoL")
system("mkdir ~/PredictiveModel_IC50/ECL")
system("mkdir ~/PredictiveModel_IC50/ECMoL")


system("mkdir ~/PredictiveModel_IC50/E/Sanger")
system("mkdir ~/PredictiveModel_IC50/C/Sanger")
system("mkdir ~/PredictiveModel_IC50/EMo/Sanger")
system("mkdir ~/PredictiveModel_IC50/CMo/Sanger")
system("mkdir ~/PredictiveModel_IC50/EC/Sanger")
system("mkdir ~/PredictiveModel_IC50/ECMo/Sanger")

system("mkdir ~/PredictiveModel_IC50/EL/Sanger")
system("mkdir ~/PredictiveModel_IC50/CL/Sanger")
system("mkdir ~/PredictiveModel_IC50/EMoL/Sanger")
system("mkdir ~/PredictiveModel_IC50/CMoL/Sanger")
system("mkdir ~/PredictiveModel_IC50/ECL/Sanger")
system("mkdir ~/PredictiveModel_IC50/ECMoL/Sanger")



system("mkdir ~/PredictiveModel_IC50/E/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/E/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/E/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/E/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/E/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/E/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/E/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/C/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/C/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/C/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/C/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/C/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/C/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/C/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/EMo/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/EMo/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/EMo/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/EMo/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/EMo/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/EMo/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/EMo/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/CMo/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/CMo/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/CMo/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/CMo/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/CMo/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/CMo/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/CMo/Sanger/Lasso")


system("mkdir ~/PredictiveModel_IC50/EC/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/EC/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/EC/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/EC/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/EC/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/EC/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/EC/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/ECMo/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/ECMo/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/ECMo/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/ECMo/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/ECMo/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/ECMo/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/ECMo/Sanger/Lasso")



system("mkdir ~/PredictiveModel_IC50/EL/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/EL/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/EL/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/EL/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/EL/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/EL/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/EL/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/CL/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/CL/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/CL/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/CL/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/CL/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/CL/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/CL/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/EMoL/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/EMoL/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/EMoL/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/EMoL/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/EMoL/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/EMoL/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/EMoL/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/CMoL/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/CMoL/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/CMoL/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/CMoL/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/CMoL/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/CMoL/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/CMoL/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/ECL/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/ECL/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/ECL/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/ECL/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/ECL/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/ECL/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/ECL/Sanger/Lasso")

system("mkdir ~/PredictiveModel_IC50/ECMoL/Sanger/PCR")
system("mkdir ~/PredictiveModel_IC50/ECMoL/Sanger/PLS")
system("mkdir ~/PredictiveModel_IC50/ECMoL/Sanger/SVM")
system("mkdir ~/PredictiveModel_IC50/ECMoL/Sanger/RF")
system("mkdir ~/PredictiveModel_IC50/ECMoL/Sanger/ENet")
system("mkdir ~/PredictiveModel_IC50/ECMoL/Sanger/Ridge")
system("mkdir ~/PredictiveModel_IC50/ECMoL/Sanger/Lasso")


workFlow_all<-function(kk){
  source("~/PredictiveModel_pipeline/myModel.R")
  source("~/PredictiveModel_pipeline/myData_CCLE.R")
  source("~/PredictiveModel_pipeline/myData_Sanger.R")
  require(pls)  
  require(kernlab)
  require(synapseClient)
  Data.set = c("Sanger")
  Data.type = c("C","CMo","E","EMo","EC","ECMo","CL","CMoL","EL","EMoL","ECL","ECMoL")  
  Model.type = c("PCR","PLS","Ridge","Lasso","RF","SVM","ENet")
  for(k0 in Data.set){
    for(k1 in Data.type){
      for(k2 in Model.type){
        filename = paste("~/PredictiveModel_IC50/",k1,"/",ko,"/",k2,"/cvDrug_",kk,".Rdata",sep="")
        if(!file.exists(filename)){
          resultsScale <- myModel(kk,data.type=k1, drug.type = "IC50", model.type = k2, nfolds = 5)    
          save(resultsScale,file = filename)        
        }
      }
    }  
  }
}


library(multicore)
library(doMC)
registerDoMC()

mclapply(1:4, function(x)workFlow_all(x))


